<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rise Up Wichita - Local Job Board</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Identity Services (for Google login) -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <style>
    * {
      box-sizing: border-box;
    }
    html, body {
      height: 100%;
    }
    body {
      background: #1e3a8a;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    /* HERO VIDEO */
    .hero-bg {
      position: relative;
      min-height: 100vh;
      overflow: hidden;
    }
    .hero-video {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 1;
    }
    .hero-overlay {
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at center, rgba(15,23,42,0.2), rgba(15,23,42,0.8));
      z-index: 2;
    }
    .hero-content {
      position: relative;
      z-index: 3;
    }
    .hero-text {
      text-shadow: 0 0 20px rgba(15,23,42,0.8);
    }

    /* NAV */
    .nav-glass {
      background: rgba(15, 23, 42, 0.9);
      backdrop-filter: blur(18px);
      border-bottom: 1px solid rgba(148, 163, 184, 0.4);
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.5);
    }

    /* 3D BUTTONS */
    .btn-3d {
      position: relative;
      transform-style: preserve-3d;
      transition: all 0.2s ease;
      border: none;
      box-shadow:
        0 10px 25px rgba(0, 0, 0, 0.35),
        0 2px 6px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
    }
    .btn-3d:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow:
        0 16px 32px rgba(0, 0, 0, 0.45),
        0 4px 10px rgba(0, 0, 0, 0.35),
        inset 0 1px 0 rgba(255, 255, 255, 0.4);
    }
    .btn-3d:active {
      transform: translateY(1px) scale(0.99);
      box-shadow:
        0 6px 15px rgba(0, 0, 0, 0.3),
        0 2px 4px rgba(0, 0, 0, 0.25),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    }
    .btn-red {
      background: linear-gradient(135deg, #ef4444, #b91c1c);
      color: #fff;
    }
    .btn-blue {
      background: linear-gradient(135deg, #3b82f6, #1d4ed8);
      color: #fff;
    }
    .btn-white {
      background: linear-gradient(135deg, #ffffff, #e5e7eb);
      color: #1d4ed8;
    }

    /* CARDS */
    .card-3d {
      background: linear-gradient(135deg, #ffffff, #eff6ff);
      box-shadow:
        0 12px 30px rgba(15, 23, 42, 0.18),
        0 1px 0 rgba(255, 255, 255, 0.8);
      border-radius: 1rem;
      border: 1px solid rgba(148, 163, 184, 0.5);
      transition: all 0.25s ease;
    }
    .card-3d:hover {
      transform: translateY(-6px) scale(1.01);
      box-shadow:
        0 18px 40px rgba(15, 23, 42, 0.3),
        0 2px 4px rgba(15, 23, 42, 0.4);
    }

    /* FLOATING ICONS */
    .float {
      animation: float 6s ease-in-out infinite;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* STATS GLOW */
    .pulse-glow {
      animation: pulseGlow 2s ease-in-out infinite alternate;
    }
    @keyframes pulseGlow {
      from {
        box-shadow: 0 0 12px rgba(239, 68, 68, 0.4);
      }
      to {
        box-shadow: 0 0 24px rgba(239, 68, 68, 0.9);
      }
    }

    /* MODALS */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
      padding: 1rem;
    }

    /* TOAST */
    .toast {
      position: fixed;
      top: 1.25rem;
      right: 1.25rem;
      z-index: 100;
      padding: 0.75rem 1.5rem;
      border-radius: 999px;
      color: #fff;
      font-weight: 500;
      opacity: 0;
      transform: translateX(100%);
      transition: all 0.3s ease;
    }
    .toast.show {
      opacity: 1;
      transform: translateX(0);
    }
    .toast-success {
      background: #16a34a;
    }
    .toast-error {
      background: #dc2626;
    }

    .section {
      display: none;
    }
    .section.active {
      display: block;
    }
  </style>
</head>

<body class="min-h-full">

  <!-- NAVBAR -->
  <nav class="fixed top-0 w-full z-40 nav-glass">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center gap-3">
          <div class="w-9 h-9 rounded-full bg-gradient-to-br from-red-500 to-yellow-400 flex items-center justify-center text-white font-bold shadow-lg">
            RU
          </div>
          <div>
            <h1 class="text-lg sm:text-xl font-bold text-white">Rise Up Wichita</h1>
            <p class="text-xs text-blue-200 hidden sm:block">Opportunity ‚Ä¢ Support ‚Ä¢ Community</p>
          </div>
        </div>

        <div class="flex items-center gap-3">
          <button onclick="showSection('home')" class="text-sm text-slate-200 hover:text-red-300 px-3 py-1 rounded-full hover:bg-white/10 transition">
            Home
          </button>
          <button onclick="showSection('jobs')" class="text-sm text-slate-200 hover:text-red-300 px-3 py-1 rounded-full hover:bg-white/10 transition">
            Jobs
          </button>
          <button onclick="showSection('seekers')" class="text-sm text-slate-200 hover:text-red-300 px-3 py-1 rounded-full hover:bg-white/10 transition">
            Job Seekers
          </button>
          <button onclick="showSection('resume')" class="text-sm text-slate-200 hover:text-red-300 px-3 py-1 rounded-full hover:bg-white/10 transition hidden sm:inline-block">
            Resume Builder
          </button>

          <!-- Auth area -->
          <div id="auth-logged-out" class="flex items-center gap-2">
            <button onclick="openLoginModal()" class="text-sm text-slate-200 hover:text-white px-3 py-1 rounded-full hover:bg-white/10 transition">
              Login
            </button>
            <button onclick="openSignupModal()" class="btn-3d btn-red text-sm px-4 py-1 rounded-full">
              Sign Up
            </button>
          </div>

          <div id="auth-logged-in" class="hidden relative">
            <button onclick="toggleUserMenu()" class="flex items-center gap-2 text-slate-100 hover:text-white px-3 py-1 rounded-full hover:bg-white/10 transition">
              <div id="user-avatar" class="w-8 h-8 bg-red-600 rounded-full flex items-center justify-center text-sm font-bold">
                U
              </div>
              <span id="user-name-nav" class="text-sm">User</span>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </button>

            <div id="user-menu" class="hidden absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-2xl overflow-hidden text-sm">
              <div class="px-4 py-3 border-b border-slate-100">
                <p id="user-name-menu" class="font-semibold text-slate-900">User Name</p>
                <p id="user-type-menu" class="text-xs text-slate-500">Job Seeker</p>
              </div>
              <button onclick="showSection('home'); closeUserMenu()" class="block w-full text-left px-4 py-2 hover:bg-slate-50">
                Home
              </button>
              <button onclick="showSection('jobs'); closeUserMenu()" class="block w-full text-left px-4 py-2 hover:bg-slate-50">
                Browse Jobs
              </button>
              <button onclick="showSection('resume'); closeUserMenu()" class="block w-full text-left px-4 py-2 hover:bg-slate-50">
                Resume Builder
              </button>
              <button onclick="showSection('postjob'); closeUserMenu()" id="menu-postjob" class="block w-full text-left px-4 py-2 hover:bg-slate-50 hidden">
                Post a Job
              </button>
              <button onclick="logout(); closeUserMenu()" class="block w-full text-left px-4 py-2 text-red-600 hover:bg-red-50">
                Logout
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- HOME / HERO SECTION -->
  <main id="home-section" class="section active">
    <div class="hero-bg flex items-center justify-center text-center text-white">
      <!-- Video -->
      <video class="hero-video" autoplay muted loop playsinline>
        <source src="https://s3.us-east-2.amazonaws.com/wichita.video.2/wichita+2.mp4" type="video/mp4" />
      </video>

      <div class="hero-overlay"></div>

      <div class="hero-content w-full max-w-5xl mx-auto px-4 pt-32 pb-24">
        <h2 class="text-sm tracking-[0.28em] uppercase text-blue-200 mb-5 hero-text">
          Wichita, Kansas ‚Ä¢ The Air Capital of the World
        </h2>
        <h1 class="hero-text text-4xl sm:text-5xl md:text-6xl font-extrabold mb-4">
          Connect Wichita's Workforce
        </h1>
        <p class="hero-text text-lg sm:text-xl text-blue-100 mb-10 max-w-2xl mx-auto">
          A local-first job board helping Wichita residents build careers, earn great pay, and keep money in the community.
        </p>

        <div class="flex flex-col sm:flex-row justify-center gap-4 mb-12">
          <button onclick="showSection('jobs')" class="btn-3d btn-white px-8 py-3 rounded-full text-lg font-semibold">
            Browse Local Jobs
          </button>
          <button onclick="guardPostJobFromHero()" class="btn-3d btn-red px-8 py-3 rounded-full text-lg font-semibold">
            Post a Job
          </button>
        </div>

        <!-- STATS -->
        <div class="flex flex-col sm:flex-row justify-center items-center gap-8 sm:gap-16">
          <div class="flex flex-col items-center float">
            <div class="w-20 h-20 rounded-full bg-white card-3d flex items-center justify-center mb-3">
              <div class="text-center">
                <div id="jobs-count" class="text-2xl font-bold text-blue-800">0</div>
                <div class="text-xs font-semibold text-blue-700">JOBS</div>
              </div>
            </div>
            <p class="hero-text text-sm font-medium">Open roles in the metro</p>
          </div>

          <div class="flex flex-col items-center float" style="animation-delay:-2s">
            <div class="w-20 h-20 rounded-full bg-white card-3d flex items-center justify-center mb-3">
              <div class="text-center">
                <div id="seekers-count" class="text-2xl font-bold text-blue-800">0</div>
                <div class="text-xs font-semibold text-blue-700">SEEKERS</div>
              </div>
            </div>
            <p class="hero-text text-sm font-medium">Profiles in the system</p>
          </div>

          <div class="flex flex-col items-center float" style="animation-delay:-4s">
            <div class="w-20 h-20 rounded-full bg-white card-3d pulse-glow flex items-center justify-center mb-3">
              <div class="text-center">
                <div class="text-2xl font-bold text-red-600">100%</div>
                <div class="text-xs font-semibold text-blue-700">LOCAL</div>
              </div>
            </div>
            <p class="hero-text text-sm font-medium">Wichita-only opportunities</p>
          </div>
        </div>
      </div>
    </div>

    <!-- FEATURED JOBS -->
    <section class="bg-white py-16">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-10">
          <h2 class="text-3xl md:text-4xl font-bold text-blue-900 mb-3">Featured Jobs in Wichita</h2>
          <p class="text-slate-600 text-lg">A quick sample of what‚Äôs available right now.</p>
        </div>

        <div id="featured-jobs" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <!-- JS injects cards here -->
        </div>

        <div class="text-center mt-8">
          <button onclick="showSection('jobs')" class="btn-3d btn-blue rounded-full px-8 py-3 font-semibold">
            View All Jobs
          </button>
        </div>
      </div>
    </section>

    <!-- FEATURED SEEKERS -->
    <section class="bg-blue-50 py-16 border-t border-slate-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-10">
          <h2 class="text-3xl md:text-4xl font-bold text-blue-900 mb-3">Featured Wichita Talent</h2>
          <p class="text-slate-600 text-lg">Local job seekers ready to work right now.</p>
        </div>

        <div id="featured-seekers" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
          <!-- JS injects cards here -->
        </div>

        <div class="text-center mt-8">
          <button onclick="guardResumeBuilder()" class="btn-3d btn-blue rounded-full px-8 py-3 font-semibold">
            Create Your Profile
          </button>
        </div>
      </div>
    </section>
  </main>

  <!-- JOBS SECTION -->
  <section id="jobs-section" class="section bg-slate-900 pt-24 pb-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-white">
      <div class="text-center mb-10">
        <h2 class="text-3xl md:text-4xl font-bold mb-3">Available Positions</h2>
        <p class="text-slate-300 text-lg">Search by title, company, or neighborhood.</p>
      </div>

      <div class="mb-8 flex flex-wrap gap-3 justify-center">
        <select id="job-type-filter" class="bg-white text-slate-900 px-4 py-2 rounded-full border border-slate-300 shadow-sm text-sm">
          <option value="">All Job Types</option>
          <option value="Full-time">Full-time</option>
          <option value="Part-time">Part-time</option>
          <option value="Contract">Contract</option>
          <option value="Seasonal">Seasonal</option>
        </select>
        <input id="job-search" type="text" placeholder="Search jobs..." class="bg-white text-slate-900 px-4 py-2 rounded-full border border-slate-300 shadow-sm w-64 text-sm" />
        <button onclick="filterJobs()" class="btn-3d btn-red px-6 py-2 rounded-full text-sm font-semibold">
          Search
        </button>
      </div>

      <div id="jobs-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- JS injects -->
      </div>

      <div id="no-jobs" class="text-center text-slate-400 mt-10 hidden">
        No jobs yet. Be the first to post.
      </div>
    </div>
  </section>

  <!-- SEEKERS SECTION -->
  <section id="seekers-section" class="section bg-slate-900 pt-24 pb-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-white">
      <div class="text-center mb-10">
        <h2 class="text-3xl md:text-4xl font-bold mb-3">Job Seekers</h2>
        <p class="text-slate-300 text-lg">Local people ready to work in Wichita.</p>
      </div>

      <div id="seekers-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- JS injects -->
      </div>

      <div id="no-seekers" class="text-center text-slate-400 mt-10 hidden">
        No job seekers yet. Encourage your friends to create a profile.
      </div>
    </div>
  </section>

  <!-- RESUME BUILDER -->
  <section id="resume-section" class="section bg-slate-900 pt-24 pb-16">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-white">
      <div class="text-center mb-10">
        <h2 class="text-3xl md:text-4xl font-bold mb-3">Resume Builder</h2>
        <p class="text-slate-300 text-lg">Build from scratch, or upload a .txt resume and we‚Äôll auto-fill the fields.</p>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
        <!-- Form -->
        <div class="card-3d text-slate-900 p-6">
          <h3 class="text-xl font-semibold text-blue-900 mb-4">Your Info</h3>

          <!-- Upload TXT resume -->
          <div class="mb-4">
            <label class="block text-sm font-medium text-slate-700 mb-1">Upload text resume (.txt)</label>
            <input id="resume-file" type="file" accept=".txt" class="block w-full text-sm text-slate-700" onchange="handleResumeUpload(event)" />
            <p class="text-xs text-slate-500 mt-1">For now, upload plain text. We‚Äôll attempt to pull name, email, phone, and sections.</p>
          </div>

          <form id="resume-form" class="space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Full Name *</label>
                <input id="res-name" required class="w-full px-3 py-2 rounded-lg border border-slate-300 text-sm" />
              </div>
              <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Email *</label>
                <input id="res-email" type="email" required class="w-full px-3 py-2 rounded-lg border border-slate-300 text-sm" />
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Phone</label>
                <input id="res-phone" class="w-full px-3 py-2 rounded-lg border border-slate-300 text-sm" />
              </div>
              <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Location *</label>
                <input id="res-location" required class="w-full px-3 py-2 rounded-lg border border-slate-300 text-sm" />
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Professional Summary *</label>
              <textarea id="res-summary" required rows="3" class="w-full px-3 py-2 rounded-lg border border-slate-300 text-sm"></textarea>
            </div>

            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Work Experience *</label>
              <textarea id="res-experience" required rows="4" class="w-full px-3 py-2 rounded-lg border border-slate-300 text-sm"></textarea>
            </div>

            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Education *</label>
              <textarea id="res-education" required rows="3" class="w-full px-3 py-2 rounded-lg border border-slate-300 text-sm"></textarea>
            </div>

            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Skills (comma separated) *</label>
              <textarea id="res-skills" required rows="2" class="w-full px-3 py-2 rounded-lg border border-slate-300 text-sm"></textarea>
            </div>

            <button type="submit" class="btn-3d btn-blue w-full rounded-full py-2 mt-2 text-sm font-semibold">
              Save Profile (local demo)
            </button>
          </form>
        </div>

        <!-- Preview -->
        <div class="card-3d text-slate-900 p-6">
          <h3 class="text-xl font-semibold text-blue-900 mb-4">Resume Preview</h3>
          <div id="resume-preview" class="text-sm text-slate-800">
            <div class="text-center text-slate-400 py-8">
              Fill the form (or upload .txt) to see your resume layout.
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- POST JOB -->
  <section id="postjob-section" class="section bg-slate-900 pt-24 pb-16">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 text-white">
      <div class="text-center mb-10">
        <h2 class="text-3xl md:text-4xl font-bold mb-3">Post a Job</h2>
        <p class="text-slate-300 text-lg">Connect with Wichita-area talent. (Demo only, stored in your browser.)</p>
      </div>

      <div class="card-3d text-slate-900 p-6">
        <form id="job-form" class="space-y-4">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Job Title *</label>
              <input id="job-title" required class="w-full px-3 py-2 rounded-lg border border-slate-300 text-sm" />
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Company Name *</label>
              <input id="job-company" required class="w-full px-3 py-2 rounded-lg border border-slate-300 text-sm" />
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Location *</label>
              <input id="job-location" required class="w-full px-3 py-2 rounded-lg border border-slate-300 text-sm" />
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Job Type *</label>
              <select id="job-type" required class="w-full px-3 py-2 rounded-lg border border-slate-300 text-sm">
                <option value="">Select type</option>
                <option value="Full-time">Full-time</option>
                <option value="Part-time">Part-time</option>
                <option value="Contract">Contract</option>
                <option value="Seasonal">Seasonal</option>
              </select>
            </div>
          </div>

          <div>
            <label class="block text-sm font-medium text-slate-700 mb-1">Salary Range</label>
            <input id="job-salary" placeholder="e.g., $50,000 - $70,000" class="w-full px-3 py-2 rounded-lg border border-slate-300 text-sm" />
          </div>

          <div>
            <label class="block text-sm font-medium text-slate-700 mb-1">Job Description *</label>
            <textarea id="job-description" required rows="4" class="w-full px-3 py-2 rounded-lg border border-slate-300 text-sm"></textarea>
          </div>

          <div>
            <label class="block text-sm font-medium text-slate-700 mb-1">Requirements *</label>
            <textarea id="job-requirements" required rows="3" class="w-full px-3 py-2 rounded-lg border border-slate-300 text-sm"></textarea>
          </div>

          <div>
            <label class="block text-sm font-medium text-slate-700 mb-1">Contact (email or phone) *</label>
            <input id="job-contact" required class="w-full px-3 py-2 rounded-lg border border-slate-300 text-sm" />
          </div>

          <button type="submit" class="btn-3d btn-red w-full rounded-full py-2 mt-2 text-sm font-semibold">
            Post Job (demo)
          </button>
        </form>
      </div>
    </div>
  </section>

  <!-- LOGIN MODAL -->
  <div id="login-modal" class="modal-backdrop hidden">
    <div class="card-3d max-w-md w-full p-6">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-semibold text-blue-900">Login</h3>
        <button onclick="closeLoginModal()" class="text-slate-400 hover:text-slate-700 text-2xl leading-none">&times;</button>
      </div>

      <form id="login-form" class="space-y-4 text-sm text-slate-900">
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Email *</label>
          <input id="login-email" type="email" required class="w-full px-3 py-2 rounded-lg border border-slate-300" />
        </div>
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Password *</label>
          <input id="login-password" type="password" required class="w-full px-3 py-2 rounded-lg border border-slate-300" />
        </div>
        <button type="submit" class="btn-3d btn-blue w-full rounded-full py-2 font-semibold">
          Login
        </button>
      </form>

      <div class="mt-4">
        <div class="flex items-center gap-2 mb-2">
          <div class="flex-1 h-px bg-slate-200"></div>
          <span class="text-xs text-slate-500">or</span>
          <div class="flex-1 h-px bg-slate-200"></div>
        </div>
        <!-- Google Sign-in button -->
        <div id="google-signin" class="flex justify-center"></div>
        <p class="text-[11px] text-slate-400 mt-2">
          Google login requires you to set your own Client ID in the code.
        </p>
      </div>

      <div class="mt-4 text-center text-xs text-slate-500">
        Don‚Äôt have an account?
        <button onclick="switchToSignup()" class="text-blue-600 hover:underline">Sign up</button>
      </div>
    </div>
  </div>

  <!-- SIGNUP MODAL -->
  <div id="signup-modal" class="modal-backdrop hidden">
    <div class="card-3d max-w-md w-full p-6">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-semibold text-blue-900">Create Account</h3>
        <button onclick="closeSignupModal()" class="text-slate-400 hover:text-slate-700 text-2xl leading-none">&times;</button>
      </div>

      <form id="signup-form" class="space-y-4 text-sm text-slate-900">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
          <button type="button" id="signup-type-seeker" onclick="setSignupType('seeker')" class="border border-slate-300 rounded-lg px-3 py-2 text-center hover:border-blue-500">
            <div class="text-2xl mb-1">üë§</div>
            <div class="font-medium text-slate-800">Job Seeker</div>
          </button>
          <button type="button" id="signup-type-poster" onclick="setSignupType('poster')" class="border border-slate-300 rounded-lg px-3 py-2 text-center hover:border-blue-500">
            <div class="text-2xl mb-1">üè¢</div>
            <div class="font-medium text-slate-800">Job Poster</div>
          </button>
        </div>
        <input type="hidden" id="signup-type" />

        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Full Name *</label>
          <input id="signup-name" required class="w-full px-3 py-2 rounded-lg border border-slate-300" />
        </div>
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Email *</label>
          <input id="signup-email" type="email" required class="w-full px-3 py-2 rounded-lg border border-slate-300" />
        </div>
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Password *</label>
          <input id="signup-password" type="password" required class="w-full px-3 py-2 rounded-lg border border-slate-300" />
          <p class="text-[11px] text-slate-500 mt-1">
            For now this is stored in your browser only. Don‚Äôt reuse a real banking/email password here.
          </p>
        </div>
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Location *</label>
          <input id="signup-location" required class="w-full px-3 py-2 rounded-lg border border-slate-300" />
        </div>
        <div id="signup-company-wrapper" class="hidden">
          <label class="block text-sm font-medium text-slate-700 mb-1">Company Name *</label>
          <input id="signup-company" class="w-full px-3 py-2 rounded-lg border border-slate-300" />
        </div>
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">About You / Company</label>
          <textarea id="signup-bio" rows="3" class="w-full px-3 py-2 rounded-lg border border-slate-300"></textarea>
        </div>

        <button type="submit" class="btn-3d btn-red w-full rounded-full py-2 font-semibold">
          Create Account
        </button>
      </form>

      <div class="mt-4 text-center text-xs text-slate-500">
        Already have an account?
        <button onclick="switchToLogin()" class="text-blue-600 hover:underline">Login</button>
      </div>
    </div>
  </div>

  <!-- TOAST -->
  <div id="toast" class="toast"></div>

  <script>
    /***********************
     * SIMPLE DATA STORAGE *
     ***********************/
    const STORAGE_KEY = 'ruw_data_v1';

    let allData = [];
    let jobs = [];
    let seekers = [];
    let users = [];
    let currentUser = null;

    function loadAllData() {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (!raw) {
        allData = [];
      } else {
        try {
          allData = JSON.parse(raw);
        } catch {
          allData = [];
        }
      }
      jobs = allData.filter(d => d.type === 'job');
      seekers = allData.filter(d => d.type === 'seeker');
      users = allData.filter(d => d.type === 'user');
    }

    function saveAllData() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(allData));
    }

    function addItem(item) {
      allData.push(item);
      saveAllData();
      loadAllData();
      refreshUI();
    }

    function updateItem(item) {
      const idx = allData.findIndex(d => d.id === item.id);
      if (idx >= 0) {
        allData[idx] = item;
        saveAllData();
        loadAllData();
        refreshUI();
      }
    }

    /***********************
     * SAMPLE DATA (10+10) *
     ***********************/
    const sampleJobs = [
      {
        id: 'job1',
        type: 'job',
        title: 'Aviation',
        company: 'Fake AeroSystems',
        location: 'Wichita, KS - South Plant',
        jobType: 'Full-time',
        salary: '$22 - $28/hr',
        description: 'Build and assemble structural components for commercial aircraft in Wichita‚Äôs aviation hub.',
        requirements: '1+ year sheet metal or mechanical experience, ability to read blueprints.',
        contact: 'jobs@fakeaviaion.com',
        createdAt: Date.now() - 1 * 86400000
      },
      {
        id: 'job2',
        type: 'job',
        title: 'Tesla Sales Consultant',
        company: 'Elons Dealership',
        location: 'West Kellogg, Wichita, KS',
        jobType: 'Full-time',
        salary: 'Base + Commission (Up to 6-figure potential)',
        description: 'Help Wichita drivers get into the right Tesla car, truck, or spaceship while earning serious commission.',
        requirements: 'People skills, coachable attitude, valid driver‚Äôs license.',
        contact: 'careers@tesla.com',
        createdAt: Date.now() - 2 * 86400000
      },
      {
        id: 'job3',
        type: 'job',
        title: 'CNC Machinist',
        company: 'Wichita Manufacturing',
        location: 'North Wichita, KS',
        jobType: 'Full-time',
        salary: '$23 - $30/hr',
        description: 'Set up and operate CNC equipment producing aerospace and industrial components.',
        requirements: 'CNC experience, ability to use measurement tools, willingness to work 2nd shift.',
        contact: 'hr@wichitaprecision.com',
        createdAt: Date.now() - 3 * 86400000
      },
      {
        id: 'job4',
        type: 'job',
        title: 'Customer Service Representative',
        company: 'ICT Credit Union',
        location: 'Downtown Wichita, KS',
        jobType: 'Full-time',
        salary: '$17 - $19/hr + benefits',
        description: 'Serve local members, open accounts, and help with loans and payments.',
        requirements: 'Customer service experience, cash handling a plus.',
        contact: 'jobs@wichitacu.org',
        createdAt: Date.now() - 4 * 86400000
      },
      {
        id: 'job5',
        type: 'job',
        title: 'Warehouse Supervisor',
        company: 'Kansas Logistics Hub',
        location: 'Wichita, KS - Industrial Park',
        jobType: 'Full-time',
        salary: '$50,000 - $60,000',
        description: 'Lead a team handling inbound/outbound freight for a busy distribution center.',
        requirements: '2+ years warehouse leadership, forklift experience.',
        contact: 'careers@kslogistics.com',
        createdAt: Date.now() - 5 * 86400000
      },
      {
        id: 'job6',
        type: 'job',
        title: 'Elementary Teacher',
        company: 'USD 555 Wichita Public Schools',
        location: 'Wichita, KS',
        jobType: 'Full-time',
        salary: '$45,000 - $60,000',
        description: 'Inspire K-5 students with engaging lessons in a Wichita public school.',
        requirements: 'Kansas teaching license, Elementary Education.',
        contact: 'teach@usd259.net',
        createdAt: Date.now() - 6 * 86400000
      },
      {
        id: 'job7',
        type: 'job',
        title: 'Registered Nurse (RN)',
        company: 'Central Care Hospital',
        location: 'Central Wichita, KS',
        jobType: 'Full-time',
        salary: '$32 - $42/hr',
        description: 'Provide quality patient care in a fast-paced hospital environment.',
        requirements: 'Active RN license in Kansas, BLS/ACLS preferred.',
        contact: 'nursing@centralcarewichita.com',
        createdAt: Date.now() - 7 * 86400000
      },
      {
        id: 'job8',
        type: 'job',
        title: 'Restaurant Manager',
        company: 'Old Town Pub',
        location: 'Old Town, Wichita, KS',
        jobType: 'Full-time',
        salary: '$48,000 - $55,000 + bonus',
        description: 'Run day-to-day operations at a busy Old Town restaurant/bar.',
        requirements: '2+ years management in restaurant/retail, flexible hours.',
        contact: 'jobs@oldtowngrill.com',
        createdAt: Date.now() - 8 * 86400000
      },
      {
        id: 'job9',
        type: 'job',
        title: 'Graphic Designer',
        company: 'Keeper Creative Studio',
        location: 'Delano District, Wichita, KS',
        jobType: 'Part-time',
        salary: '$25 - $35/hr',
        description: 'Create branding and marketing materials for local businesses.',
        requirements: 'Strong portfolio, Adobe Creative Cloud.',
        contact: 'design@kotpcreative.com',
        createdAt: Date.now() - 9 * 86400000
      },
      {
        id: 'job10',
        type: 'job',
        title: 'Community Outreach Coordinator',
        company: 'Rise Up Wichita',
        location: 'Hybrid - Wichita, KS',
        jobType: 'Contract',
        salary: '$20 - $25/hr',
        description: 'Help connect job seekers with employers, coordinate events, and manage online outreach.',
        requirements: 'People person, social media comfort, organized.',
        contact: 'james@riseupwichita.com',
        createdAt: Date.now() - 10 * 86400000
      }
    ];

    const sampleSeekers = [
      {
        id: 'seeker1',
        type: 'seeker',
        name: 'Sarah Johnson',
        email: 'sarah.johnson@example.com',
        phone: '(316) 555-0123',
        location: 'West Wichita, KS',
        summary: 'Marketing specialist who loves helping Wichita small businesses grow.',
        experience: 'Marketing Coordinator at Prairie Marketing Group (2019-2024).',
        education: 'BBA in Marketing, Wichita State University.',
        skills: 'Digital Marketing, Social Media, Email Campaigns, Canva',
        createdAt: Date.now() - 5 * 86400000
      },
      {
        id: 'seeker2',
        type: 'seeker',
        name: 'Michael Rodriguez',
        email: 'michael.rod@example.com',
        phone: '(316) 555-0456',
        location: 'North Wichita, KS',
        summary: 'Full-stack developer focused on clean, fast web apps.',
        experience: 'Junior Developer at ICT Tech Labs (2021-2024).',
        education: 'BS Computer Science, Wichita State University.',
        skills: 'JavaScript, Node.js, React, TailwindCSS',
        createdAt: Date.now() - 7 * 86400000
      },
      {
        id: 'seeker3',
        type: 'seeker',
        name: 'Emily Chen',
        email: 'emily.chen@example.com',
        phone: '(316) 555-0789',
        location: 'Downtown Wichita, KS',
        summary: 'RN with emergency room experience and a heart for Wichita families.',
        experience: 'Staff RN ‚Äì Emergency Department at Central Care Hospital.',
        education: 'BSN, Newman University.',
        skills: 'Emergency Care, IV Therapy, Patient Education',
        createdAt: Date.now() - 6 * 86400000
      },
      {
        id: 'seeker4',
        type: 'seeker',
        name: 'David Thompson',
        email: 'david.thompson@example.com',
        phone: '(316) 555-0321',
        location: 'Haysville, KS',
        summary: 'ASE-certified technician who keeps Wichita on the road.',
        experience: 'Lead Technician at Midwest Auto Service (2016-2024).',
        education: 'Automotive Technology ‚Äì WATC.',
        skills: 'Diagnostics, Brakes, Electrical, Customer Service',
        createdAt: Date.now() - 12 * 86400000
      },
      {
        id: 'seeker5',
        type: 'seeker',
        name: 'Jessica Martinez',
        email: 'jessica.martinez@example.com',
        phone: '(316) 555-0654',
        location: 'South Wichita, KS',
        summary: 'Elementary teacher passionate about literacy and STEM.',
        experience: '3rd Grade Teacher ‚Äì USD 259 (2020-2024).',
        education: 'BS Elementary Education, Friends University.',
        skills: 'Classroom Management, Reading Intervention, Google Classroom',
        createdAt: Date.now() - 3 * 86400000
      },
      {
        id: 'seeker6',
        type: 'seeker',
        name: 'Andre Lewis',
        email: 'andre.lewis@example.com',
        phone: '(316) 555-0912',
        location: 'Andover, KS',
        summary: 'Warehouse supervisor experienced in fast-paced distribution.',
        experience: 'Shift Supervisor ‚Äì Kansas Logistics Hub (2018-2024).',
        education: 'Associate Degree in Business, Butler CC.',
        skills: 'Leadership, Inventory, Forklift, Safety',
        createdAt: Date.now() - 15 * 86400000
      },
      {
        id: 'seeker7',
        type: 'seeker',
        name: 'Amanda Perez',
        email: 'amanda.perez@example.com',
        phone: '(316) 555-0990',
        location: 'Maize, KS',
        summary: 'Experienced CSR who enjoys solving member problems.',
        experience: 'Member Services ‚Äì Wichita Credit Union.',
        education: 'High School + on-the-job training.',
        skills: 'Customer Service, Cash Handling, Cross-selling',
        createdAt: Date.now() - 9 * 86400000
      },
      {
        id: 'seeker8',
        type: 'seeker',
        name: 'Tyler Brooks',
        email: 'tyler.brooks@example.com',
        phone: '(316) 555-0444',
        location: 'Derby, KS',
        summary: 'CNC machinist with a focus on aerospace quality.',
        experience: 'CNC Operator ‚Äì ICT Precision Machining.',
        education: 'CNC certificate ‚Äì WSU Tech.',
        skills: 'CNC Programming, GD&T, Inspection',
        createdAt: Date.now() - 20 * 86400000
      },
      {
        id: 'seeker9',
        type: 'seeker',
        name: 'Olivia Nguyen',
        email: 'olivia.nguyen@example.com',
        phone: '(316) 555-0777',
        location: 'East Wichita, KS',
        summary: 'Graphic designer who loves Wichita skyline silhouettes.',
        experience: 'Freelance designer for local coffee shops and churches.',
        education: 'BFA Graphic Design, Wichita State.',
        skills: 'Branding, Logos, Social Graphics, Canva',
        createdAt: Date.now() - 2 * 86400000
      },
      {
        id: 'seeker10',
        type: 'seeker',
        name: 'Marcus Hill',
        email: 'marcus.hill@example.com',
        phone: '(316) 555-0111',
        location: 'Park City, KS',
        summary: 'Production worker with experience on aviation assembly lines.',
        experience: 'Assembler ‚Äì Aircraft Structures Co. (2019-2024).',
        education: 'High School, on-the-job training.',
        skills: 'Assembly, Power Tools, Safety, Teamwork',
        createdAt: Date.now() - 11 * 86400000
      }
    ];

    /* SAMPLE USERS (INCLUDES YOUR ADMIN LOGIN) */
    const sampleUsers = [
      {
        id: 'user-owner',
        type: 'user',
        userType: 'poster',
        name: 'James Davis',
        email: 'icrushgoasl@gmail.com', // login email (case-insensitive)
        password: 'JMD.8789',
        location: 'Wichita, KS',
        company: 'Rise Up Wichita',
        bio: 'Site owner and local job connector.',
        createdAt: Date.now() - 86400000
      },
      {
        id: 'user-sample-seeker',
        type: 'user',
        userType: 'seeker',
        name: 'Sample Job Seeker',
        email: 'seeker@example.com',
        password: 'password123',
        location: 'Wichita, KS',
        company: '',
        bio: 'Demo account for job seekers.',
        createdAt: Date.now() - 2 * 86400000
      }
    ];

    /*********************
     * AUTH / SESSION    *
     *********************/
    function loadSession() {
      const raw = localStorage.getItem('ruw_session');
      if (!raw) {
        currentUser = null;
        return;
      }
      try {
        currentUser = JSON.parse(raw);
      } catch {
        currentUser = null;
      }
    }

    function saveSession() {
      if (!currentUser) {
        localStorage.removeItem('ruw_session');
      } else {
        localStorage.setItem('ruw_session', JSON.stringify(currentUser));
      }
    }

    function logout() {
      currentUser = null;
      saveSession();
      refreshAuthUI();
      showToast('Logged out.', 'success');
      showSection('home');
    }

    /*********************
     * UI HELPERS        *
     *********************/
    function showSection(name) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      const id = name + '-section';
      const el = document.getElementById(id);
      if (el) el.classList.add('active');
      // close modals just in case
      closeLoginModal();
      closeSignupModal();
      closeUserMenu();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function guardPostJobFromHero() {
      if (!currentUser) {
        showToast('Login as a Job Poster to post jobs.', 'error');
        openLoginModal();
        return;
      }
      if (currentUser.userType !== 'poster') {
        showToast('You must be a Job Poster to post jobs.', 'error');
        return;
      }
      showSection('postjob');
    }

    function guardResumeBuilder() {
      if (!currentUser) {
        showToast('Login as a Job Seeker to build your resume.', 'error');
        openLoginModal();
        return;
      }
      showSection('resume');
    }

    function formatDateShort(ms) {
      const d = new Date(ms);
      return d.toLocaleDateString();
    }

    function timeAgo(ms) {
      const diffDays = Math.floor((Date.now() - ms) / 86400000);
      if (diffDays <= 0) return 'today';
      if (diffDays === 1) return 'yesterday';
      if (diffDays < 7) return diffDays + ' days ago';
      return formatDateShort(ms);
    }

    function showToast(msg, type = 'success') {
      const toast = document.getElementById('toast');
      toast.textContent = msg;
      toast.className = 'toast show ' + (type === 'success' ? 'toast-success' : 'toast-error');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 2800);
    }

    /*********************
     * RENDERING         *
     *********************/
    function refreshCounts() {
      document.getElementById('jobs-count').textContent = jobs.length;
      document.getElementById('seekers-count').textContent = seekers.length;
    }

    function renderFeaturedJobs() {
      const container = document.getElementById('featured-jobs');
      const top = [...jobs].sort((a, b) => b.createdAt - a.createdAt).slice(0, 3);
      if (!top.length) {
        container.innerHTML = '<p class="text-slate-500 text-center col-span-full">No jobs yet.</p>';
        return;
      }
      container.innerHTML = top.map(job => `
        <article class="card-3d p-5 flex flex-col gap-3 cursor-pointer" onclick="viewJob('${job.id}')">
          <div class="flex justify-between items-start gap-2">
            <h3 class="font-semibold text-blue-900 text-lg">${job.title}</h3>
            <span class="text-xs px-2 py-1 rounded-full bg-red-600 text-white">${job.jobType}</span>
          </div>
          <p class="text-sm font-medium text-slate-800">${job.company}</p>
          <p class="text-xs text-slate-600">üìç ${job.location}</p>
          <p class="text-xs text-slate-600">üí∞ ${job.salary || 'Pay DOE'}</p>
          <p class="text-sm text-slate-700 line-clamp-3">${job.description}</p>
          <div class="mt-auto flex justify-between items-center text-xs text-slate-500">
            <span>Posted ${timeAgo(job.createdAt)}</span>
            <button onclick="event.stopPropagation(); viewJob('${job.id}')" class="btn-3d btn-blue text-xs px-3 py-1 rounded-full">View</button>
          </div>
        </article>
      `).join('');
    }

    function renderFeaturedSeekers() {
      const container = document.getElementById('featured-seekers');
      const top = [...seekers].sort((a, b) => b.createdAt - a.createdAt).slice(0, 4);
      if (!top.length) {
        container.innerHTML = '<p class="text-slate-500 text-center col-span-full">No job seekers yet.</p>';
        return;
      }
      container.innerHTML = top.map(s => `
        <article class="card-3d p-5 text-center cursor-pointer" onclick="viewSeeker('${s.id}')">
          <div class="w-14 h-14 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 mx-auto flex items-center justify-center text-white text-xl font-bold mb-3">
            ${s.name.charAt(0)}
          </div>
          <h3 class="font-semibold text-blue-900 mb-1 text-sm">${s.name}</h3>
          <p class="text-xs text-slate-600 mb-1">üìç ${s.location}</p>
          <p class="text-xs text-slate-700 mb-2 line-clamp-3">${s.summary}</p>
          <p class="text-[11px] text-slate-500">Skills: ${s.skills.split(',').slice(0, 3).join(', ')}${s.skills.split(',').length > 3 ? '‚Ä¶' : ''}</p>
        </article>
      `).join('');
    }

    function renderJobsList(list = jobs) {
      const grid = document.getElementById('jobs-grid');
      const noJobsEl = document.getElementById('no-jobs');
      if (!list.length) {
        grid.innerHTML = '';
        noJobsEl.classList.remove('hidden');
        return;
      }
      noJobsEl.classList.add('hidden');
      grid.innerHTML = list.map(job => `
        <article class="card-3d p-5 flex flex-col gap-3 cursor-pointer" onclick="viewJob('${job.id}')">
          <div class="flex justify-between items-start gap-2">
            <h3 class="font-semibold text-blue-900 text-lg">${job.title}</h3>
            <span class="text-xs px-2 py-1 rounded-full bg-red-600 text-white">${job.jobType}</span>
          </div>
          <p class="text-sm font-medium text-slate-800">${job.company}</p>
          <p class="text-xs text-slate-300">üìç ${job.location}</p>
          <p class="text-xs text-slate-300">üí∞ ${job.salary || 'Pay DOE'}</p>
          <p class="text-sm text-slate-200 line-clamp-3">${job.description}</p>
          <div class="mt-auto flex justify-between items-center text-xs text-slate-400">
            <span>Posted ${timeAgo(job.createdAt)}</span>
            <button onclick="event.stopPropagation(); viewJob('${job.id}')" class="btn-3d btn-blue text-xs px-3 py-1 rounded-full">View</button>
          </div>
        </article>
      `).join('');
    }

    function renderSeekersList() {
      const grid = document.getElementById('seekers-grid');
      const noEl = document.getElementById('no-seekers');
      if (!seekers.length) {
        grid.innerHTML = '';
        noEl.classList.remove('hidden');
        return;
      }
      noEl.classList.add('hidden');
      grid.innerHTML = seekers.map(s => `
        <article class="card-3d p-5 flex flex-col gap-3 cursor-pointer" onclick="viewSeeker('${s.id}')">
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center text-white text-lg font-bold">
              ${s.name.charAt(0)}
            </div>
            <div>
              <h3 class="font-semibold text-blue-900 text-sm">${s.name}</h3>
              <p class="text-xs text-slate-600">üìç ${s.location}</p>
            </div>
          </div>
          <p class="text-sm text-slate-700 line-clamp-3">${s.summary}</p>
          <p class="text-xs text-slate-500">Skills: ${s.skills}</p>
          <div class="mt-auto flex justify-between items-center text-xs text-slate-500">
            <span>Joined ${timeAgo(s.createdAt)}</span>
            <button onclick="event.stopPropagation(); viewSeeker('${s.id}')" class="btn-3d btn-blue text-xs px-3 py-1 rounded-full">View</button>
          </div>
        </article>
      `).join('');
    }

    function viewJob(id) {
      const job = jobs.find(j => j.id === id);
      if (!job) return;
      const modal = document.createElement('div');
      modal.className = 'modal-backdrop';
      modal.innerHTML = `
        <div class="card-3d max-w-xl w-full p-6 text-slate-900">
          <div class="flex justify-between items-start mb-3">
            <div>
              <h3 class="text-xl font-bold text-blue-900 mb-1">${job.title}</h3>
              <p class="text-sm font-medium text-slate-800">${job.company}</p>
              <p class="text-xs text-slate-600">üìç ${job.location} ‚Ä¢ ${job.jobType}</p>
              <p class="text-xs text-slate-600">üí∞ ${job.salary || 'Pay DOE'}</p>
            </div>
            <button onclick="this.closest('.modal-backdrop').remove()" class="text-slate-400 hover:text-slate-700 text-2xl leading-none">&times;</button>
          </div>
          <div class="mb-4">
            <h4 class="text-sm font-semibold text-blue-900 mb-1">Description</h4>
            <p class="text-sm text-slate-800 whitespace-pre-line">${job.description}</p>
          </div>
          <div class="mb-4">
            <h4 class="text-sm font-semibold text-blue-900 mb-1">Requirements</h4>
            <p class="text-sm text-slate-800 whitespace-pre-line">${job.requirements}</p>
          </div>
          <div class="mb-4">
            <h4 class="text-sm font-semibold text-blue-900 mb-1">Contact</h4>
            <p class="text-sm text-slate-800">${job.contact}</p>
          </div>
          <div class="flex justify-between items-center text-xs text-slate-500">
            <span>Posted ${formatDateShort(job.createdAt)}</span>
            <button onclick="this.closest('.modal-backdrop').remove()" class="btn-3d btn-red text-xs px-4 py-1 rounded-full">Close</button>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
    }

    function viewSeeker(id) {
      const s = seekers.find(x => x.id === id);
      if (!s) return;
      const modal = document.createElement('div');
      modal.className = 'modal-backdrop';
      modal.innerHTML = `
        <div class="card-3d max-w-xl w-full p-6 text-slate-900">
          <div class="flex justify-between items-start mb-3">
            <div class="flex gap-3">
              <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 text-lg font-bold">
                ${s.name.charAt(0)}
              </div>
              <div>
                <h3 class="text-xl font-bold text-blue-900 mb-1">${s.name}</h3>
                <p class="text-sm text-slate-700">üìç ${s.location}</p>
                <p class="text-xs text-slate-600">üìß ${s.email}</p>
                ${s.phone ? `<p class="text-xs text-slate-600">üìû ${s.phone}</p>` : ''}
              </div>
            </div>
            <button onclick="this.closest('.modal-backdrop').remove()" class="text-slate-400 hover:text-slate-700 text-2xl leading-none">&times;</button>
          </div>
          <div class="mb-3">
            <h4 class="text-sm font-semibold text-blue-900 mb-1">Professional Summary</h4>
            <p class="text-sm text-slate-800 whitespace-pre-line">${s.summary}</p>
          </div>
          <div class="mb-3">
            <h4 class="text-sm font-semibold text-blue-900 mb-1">Experience</h4>
            <p class="text-sm text-slate-800 whitespace-pre-line">${s.experience}</p>
          </div>
          <div class="mb-3">
            <h4 class="text-sm font-semibold text-blue-900 mb-1">Education</h4>
            <p class="text-sm text-slate-800 whitespace-pre-line">${s.education}</p>
          </div>
          <div class="mb-3">
            <h4 class="text-sm font-semibold text-blue-900 mb-1">Skills</h4>
            <p class="text-sm text-slate-800">${s.skills}</p>
          </div>
          <div class="flex justify-end">
            <button onclick="this.closest('.modal-backdrop').remove()" class="btn-3d btn-blue text-xs px-4 py-1 rounded-full">Close</button>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
    }

    function refreshUI() {
      refreshCounts();
      renderFeaturedJobs();
      renderFeaturedSeekers();
      renderJobsList();
      renderSeekersList();
      refreshAuthUI();
    }

    function refreshAuthUI() {
      const out = document.getElementById('auth-logged-out');
      const logged = document.getElementById('auth-logged-in');
      const menuPost = document.getElementById('menu-postjob');

      if (!currentUser) {
        out.classList.remove('hidden');
        logged.classList.add('hidden');
        menuPost.classList.add('hidden');
        return;
      }

      out.classList.add('hidden');
      logged.classList.remove('hidden');

      document.getElementById('user-avatar').textContent = currentUser.name.charAt(0).toUpperCase();
      document.getElementById('user-name-nav').textContent = currentUser.name;
      document.getElementById('user-name-menu').textContent = currentUser.name;
      document.getElementById('user-type-menu').textContent = currentUser.userType === 'poster' ? 'Job Poster' : 'Job Seeker';
      if (currentUser.userType === 'poster') {
        menuPost.classList.remove('hidden');
      } else {
        menuPost.classList.add('hidden');
      }
    }

    /*********************
     * LOGIN / SIGNUP    *
     *********************/
    const loginModal = document.getElementById('login-modal');
    const signupModal = document.getElementById('signup-modal');
    const userMenuEl = document.getElementById('user-menu');

    function openLoginModal() {
      loginModal.classList.remove('hidden');
      signupModal.classList.add('hidden');
    }
    function closeLoginModal() {
      loginModal.classList.add('hidden');
    }
    function openSignupModal() {
      signupModal.classList.remove('hidden');
      loginModal.classList.add('hidden');
    }
    function closeSignupModal() {
      signupModal.classList.add('hidden');
    }
    function switchToSignup() {
      openSignupModal();
    }
    function switchToLogin() {
      openLoginModal();
    }

    function toggleUserMenu() {
      userMenuEl.classList.toggle('hidden');
    }
    function closeUserMenu() {
      userMenuEl.classList.add('hidden');
    }
    document.addEventListener('click', (e) => {
      const wrapper = document.getElementById('auth-logged-in');
      if (!wrapper.contains(e.target)) {
        closeUserMenu();
      }
    });

    function setSignupType(type) {
      document.getElementById('signup-type').value = type;
      document.getElementById('signup-type-seeker').classList.toggle('border-blue-500', type === 'seeker');
      document.getElementById('signup-type-poster').classList.toggle('border-blue-500', type === 'poster');
      const compWrap = document.getElementById('signup-company-wrapper');
      if (type === 'poster') {
        compWrap.classList.remove('hidden');
      } else {
        compWrap.classList.add('hidden');
      }
    }

    document.getElementById('signup-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const type = document.getElementById('signup-type').value || 'seeker';
      const name = document.getElementById('signup-name').value.trim();
      const email = document.getElementById('signup-email').value.trim().toLowerCase();
      const password = document.getElementById('signup-password').value;
      const location = document.getElementById('signup-location').value.trim();
      const company = document.getElementById('signup-company').value.trim();
      const bio = document.getElementById('signup-bio').value.trim();

      if (!name || !email || !password || !location) {
        showToast('Please fill all required fields.', 'error');
        return;
      }

      if (users.find(u => u.email === email)) {
        showToast('An account with that email already exists.', 'error');
        return;
      }

      const newUser = {
        id: 'user-' + Date.now(),
        type: 'user',
        userType: type,
        name,
        email,
        password, // stored in localStorage only ‚Äì demo only
        location,
        company: type === 'poster' ? company : '',
        bio,
        createdAt: Date.now()
      };
      addItem(newUser);
      currentUser = newUser;
      saveSession();
      refreshAuthUI();
      closeSignupModal();
      showToast('Account created. You are now logged in.', 'success');
      if (type === 'poster') showSection('postjob'); else showSection('resume');
    });

    document.getElementById('login-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const email = document.getElementById('login-email').value.trim().toLowerCase();
      const password = document.getElementById('login-password').value;
      const u = users.find(u => u.email === email && u.password === password);
      if (!u) {
        showToast('Invalid email or password.', 'error');
        return;
      }
      currentUser = u;
      saveSession();
      refreshAuthUI();
      closeLoginModal();
      showToast('Welcome back, ' + u.name + '!', 'success');
    });

    /*********************
     * GOOGLE LOGIN      *
     *********************/
    function initGoogleLogin() {
      if (!window.google || !google.accounts || !google.accounts.id) return;

      // TODO: replace with your real Google Client ID
      const CLIENT_ID = 'YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com';

      google.accounts.id.initialize({
        client_id: CLIENT_ID,
        callback: handleGoogleCredentialResponse
      });
      google.accounts.id.renderButton(
        document.getElementById('google-signin'),
        { theme: 'outline', size: 'large', shape: 'pill' }
      );
    }

    function parseJwt(token) {
      const base64Url = token.split('.')[1];
      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
      const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
      }).join(''));
      return JSON.parse(jsonPayload);
    }

    function handleGoogleCredentialResponse(response) {
      try {
        const data = parseJwt(response.credential);
        const email = (data.email || '').toLowerCase();
        const name = data.name || (data.given_name || '') + ' ' + (data.family_name || '');
        if (!email) {
          showToast('Google response did not include an email.', 'error');
          return;
        }
        let u = users.find(x => x.email === email);
        if (!u) {
          u = {
            id: 'user-' + Date.now(),
            type: 'user',
            userType: 'seeker',
            name: name || 'Google User',
            email,
            password: '', // no local password, they use Google
            location: 'Wichita, KS',
            company: '',
            bio: 'Signed in with Google',
            createdAt: Date.now()
          };
          addItem(u);
        }
        currentUser = u;
        saveSession();
        refreshAuthUI();
        closeLoginModal();
        showToast('Logged in with Google as ' + u.name, 'success');
      } catch (err) {
        console.error(err);
        showToast('Google login failed.', 'error');
      }
    }

    window.handleGoogleCredentialResponse = handleGoogleCredentialResponse;

    /*********************
     * JOB FORM          *
     *********************/
    document.getElementById('job-form').addEventListener('submit', (e) => {
      e.preventDefault();
      if (!currentUser || currentUser.userType !== 'poster') {
        showToast('You must be logged in as a Job Poster.', 'error');
        return;
      }
      const job = {
        id: 'job-' + Date.now(),
        type: 'job',
        title: document.getElementById('job-title').value.trim(),
        company: document.getElementById('job-company').value.trim(),
        location: document.getElementById('job-location').value.trim(),
        jobType: document.getElementById('job-type').value,
        salary: document.getElementById('job-salary').value.trim(),
        description: document.getElementById('job-description').value.trim(),
        requirements: document.getElementById('job-requirements').value.trim(),
        contact: document.getElementById('job-contact').value.trim(),
        createdAt: Date.now()
      };
      if (!job.title || !job.company || !job.location || !job.jobType || !job.description || !job.requirements || !job.contact) {
        showToast('Please complete all required job fields.', 'error');
        return;
      }
      addItem(job);
      document.getElementById('job-form').reset();
      showToast('Job posted (stored in your browser).', 'success');
      showSection('jobs');
    });

    /*********************
     * RESUME BUILDER    *
     *********************/
    document.getElementById('resume-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const seeker = {
        id: 'seeker-' + Date.now(),
        type: 'seeker',
        name: document.getElementById('res-name').value.trim(),
        email: document.getElementById('res-email').value.trim(),
        phone: document.getElementById('res-phone').value.trim(),
        location: document.getElementById('res-location').value.trim(),
        summary: document.getElementById('res-summary').value.trim(),
        experience: document.getElementById('res-experience').value.trim(),
        education: document.getElementById('res-education').value.trim(),
        skills: document.getElementById('res-skills').value.trim(),
        createdAt: Date.now()
      };
      if (!seeker.name || !seeker.email || !seeker.location || !seeker.summary || !seeker.experience || !seeker.education || !seeker.skills) {
        showToast('Fill all required resume fields.', 'error');
        return;
      }
      addItem(seeker);
      showToast('Profile saved & added to Job Seekers (demo).', 'success');
      updateResumePreview(seeker);
    });

    function updateResumePreview(seeker) {
      document.getElementById('resume-preview').innerHTML = `
        <div class="border-b border-blue-900 pb-3 mb-3 text-center">
          <h2 class="text-2xl font-bold text-blue-900">${seeker.name}</h2>
          <p class="text-sm text-slate-700">${seeker.email}${seeker.phone ? ' ‚Ä¢ ' + seeker.phone : ''}</p>
          <p class="text-sm text-slate-700">${seeker.location}</p>
        </div>
        <section class="mb-3">
          <h3 class="text-sm font-semibold text-blue-900 border-b border-slate-300 mb-1">Professional Summary</h3>
          <p class="text-sm text-slate-800 whitespace-pre-line">${seeker.summary}</p>
        </section>
        <section class="mb-3">
          <h3 class="text-sm font-semibold text-blue-900 border-b border-slate-300 mb-1">Work Experience</h3>
          <p class="text-sm text-slate-800 whitespace-pre-line">${seeker.experience}</p>
        </section>
        <section class="mb-3">
          <h3 class="text-sm font-semibold text-blue-900 border-b border-slate-300 mb-1">Education</h3>
          <p class="text-sm text-slate-800 whitespace-pre-line">${seeker.education}</p>
        </section>
        <section>
          <h3 class="text-sm font-semibold text-blue-900 border-b border-slate-300 mb-1">Skills</h3>
          <p class="text-sm text-slate-800">${seeker.skills}</p>
        </section>
      `;
    }

    function handleResumeUpload(evt) {
      const file = evt.target.files[0];
      if (!file) return;
      if (!file.name.toLowerCase().endsWith('.txt')) {
        showToast('Right now we only parse .txt resumes.', 'error');
        evt.target.value = '';
        return;
      }
      const reader = new FileReader();
      reader.onload = (e) => {
        const text = e.target.result;
        autoFillResumeFromText(text);
      };
      reader.readAsText(file);
    }

    function autoFillResumeFromText(text) {
      // simple heuristics, not perfect but gives that "magic" feeling
      const lines = text.split(/\r?\n/).map(l => l.trim()).filter(Boolean);
      if (lines.length) {
        document.getElementById('res-name').value = lines[0];
      }

      const emailMatch = text.match(/[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}/);
      if (emailMatch) document.getElementById('res-email').value = emailMatch[0];

      const phoneMatch = text.match(/(\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4})/);
      if (phoneMatch) document.getElementById('res-phone').value = phoneMatch[0];

      document.getElementById('res-location').value = 'Wichita, KS';

      // crude splits for sections
      const lower = text.toLowerCase();
      const summaryIdx = lower.indexOf('summary');
      const experienceIdx = lower.indexOf('experience');
      const educationIdx = lower.indexOf('education');
      const skillsIdx = lower.indexOf('skill');

      const slice = (startIdx, endIdx) =>
        startIdx >= 0
          ? text.slice(startIdx, endIdx >= 0 ? endIdx : undefined).replace(/^[A-Za-z ]+:/i, '').trim()
          : '';

      const summary = slice(summaryIdx, experienceIdx);
      const experience = slice(experienceIdx, educationIdx);
      const education = slice(educationIdx, skillsIdx);
      const skills = slice(skillsIdx, -1);

      if (summary) document.getElementById('res-summary').value = summary;
      if (experience) document.getElementById('res-experience').value = experience;
      if (education) document.getElementById('res-education').value = education;
      if (skills) document.getElementById('res-skills').value = skills;

      showToast('Pulled info from your text resume. Review and tweak as needed.', 'success');
    }

    /*********************
     * FILTER JOBS       *
     *********************/
    function filterJobs() {
      const type = document.getElementById('job-type-filter').value;
      const search = document.getElementById('job-search').value.toLowerCase();
      let list = jobs;
      if (type) {
        list = list.filter(j => j.jobType === type);
      }
      if (search) {
        list = list.filter(j =>
          j.title.toLowerCase().includes(search) ||
          j.company.toLowerCase().includes(search) ||
          j.location.toLowerCase().includes(search)
        );
      }
      renderJobsList(list);
    }

    /*********************
     * INIT              *
     *********************/
    function ensureSampleData() {
      if (!jobs.length && !seekers.length && !users.length) {
        // Add sample jobs, seekers, and users
        allData = [...sampleJobs, ...sampleSeekers, ...sampleUsers];
        saveAllData();
        loadAllData();
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      loadAllData();
      ensureSampleData();
      loadAllData(); // reload after sample
      loadSession();
      refreshUI();
      showSection('home');

      // Initialize Google button (will only work once you add a real Client ID)
      setTimeout(initGoogleLogin, 800);
    });

  </script>
</body>
</html>
